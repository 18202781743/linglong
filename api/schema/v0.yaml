# SPDX-FileCopyrightText: 2023 UnionTech Software Technology Co., Ltd.
# SPDX-License-Identifier: LGPL-3.0-or-later
#
# NOTE:
# This yaml file is converted to json schema by running
# yq e '.properties = ( [
#   .$defs | keys | .[] as $type | {
#     "key" : $type,
#     "value": {
#       "$ref": "#/$defs/"+$type
#     }
#   } ] | from_entries
# )' -o json
# Check ../../tools/codegen.sh for details
#
# WARNING:
# Please make sure every changes in this file is backward compatible.

$schema: http://json-schema.org/draft-04/schema#
description:
  Types used as v0 API of linglong
  D-Bus service, configuration files and CLI output.
  These types all should be removed later.
  The top level type is a place holder to make quicktype work.
$defs:
  PackageInfo:
    title: PackageInfo
    type: object
    required:
      - appid
      - module
      - arch
      - version
      - kind
      - name
      - size
    properties:
      appid:
        type: string
      module:
        type: string
      arch:
        type: array
        items:
          type: string
      version:
        type: string
      kind:
        type: string
      name:
        type: string
      size:
        description:
          Uncompressed package size in bytes
        type: integer
      runtime:
        type: string
      base:
        type: string
      permissions:
        $ref: '#/$defs/ApplicationConfigurationPermissions'
      description:
        type: string
  ApplicationConfigurationPermissions:
    title: ApplicationConfigurationPermissions
    type: object
    properties:
      binds:
        type: array
        items:
          type: object
          title: ApplicationConfigurationPermissionsBind
          required:
            - source
            - destination
          properties:
            source:
              type: string
            destination:
              type: string
type: object
properties:
  # NOTE: "properties" is auto generated by referring all types is $defs
